<main class="feedback-form" [formGroup]="feedbackForm">
  @switch (currentFeedbackFormStep) {
    @default {
      <h2 class="title">What would you like to report?</h2>

      @if (currentFeedbackFormStep === feedbackFormStep.MAIN_CATEGORY) {
        <app-input-feedback-category
          class="categories"
          [categories]="(mainCategories$ | async) ?? []"
          formControlName="mainCategory"
        >
        </app-input-feedback-category>
      } @else {
        <p class="description">{{ feedbackForm.value.mainCategory }}</p>
        <app-input-feedback-category
          class="categories"
          [withColor]="false"
          [categories]="(subCategories$ | async) ?? []"
          formControlName="subCategory"
        >
        </app-input-feedback-category>
      }
    }
    @case (feedbackFormStep.MOTIVATION) {
      <h2 class="title">What's the reason of your feedback?</h2>
      <app-input-feedback-category
        class="categories"
        [withColor]="false"
        [categories]="motivations"
        formControlName="motivation"
      >
      </app-input-feedback-category>
    }
    @case (feedbackFormStep.MESSAGE_AND_ATTACHMENTS) {
      <h2 class="title">What's your feedback?</h2>
      <app-feedback-message-and-attachments
        [reasonForm]="feedbackForm.controls.message"
      ></app-feedback-message-and-attachments>
    }
    @case (feedbackFormStep.LOCATION) {
      <h2 class="title">What's the feedback location?</h2>
      <app-feedback-location [locationFormControl]="feedbackForm.controls.location"></app-feedback-location>
    }
    @case (feedbackFormStep.CONTACT) {
      <h2 class="title">Get in touch</h2>
      <app-feedback-contact [contactForm]="feedbackForm.controls.contact"></app-feedback-contact>
    }
  }
</main>
<footer class="footer flex-column">
  <app-steps [amount]="6" [active]="activeStep"></app-steps>
  <div class="flex-row">
    @if (currentFeedbackFormStep > 0) {
      <p-button label="Back" [outlined]="true" (click)="back()"></p-button>
    }
    <p-button class="next-button" label="Next" [disabled]="!canClickNextButton()" (click)="next()"></p-button>
  </div>
</footer>
<div class="background-container">
  <app-icon class="background" icon="logo"></app-icon>
</div>
