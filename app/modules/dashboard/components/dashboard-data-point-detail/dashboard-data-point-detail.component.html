<div class="container flex-column">
  <div class="location-information-container shadow-sm flex-row">
    <div class="full-width flex-column">
      <h1 class="display-xs">{{ name() }}</h1>

      <ng-container *ngIf="address(); else addressLoader">
        <p class="body-xs">{{ address() }}</p>
      </ng-container>
      <ng-template #addressLoader>
        <p-skeleton class="address-loader"></p-skeleton>
      </ng-template>
    </div>
    <app-icon icon="close" (click)="close.emit()"></app-icon>
  </div>

  @for (dataPoint of dataPoints; track dataPoint.type) {
    @switch (dataPoint.type) {
      @case (DATA_POINT_TYPE.WEATHER_CONDITIONS) {
        <ul class="metric-container">
          @for (metric of dataPoint.data | keyvalue; track metric.key) {
            <li>
              <p class="button-sm">{{ getWeatherConditionMetricLabel(metric.key) }}</p>
              <small class="body-sm">
                {{ getWeatherConditionMetricValue(metric.value) }}{{ getWeatherConditionMetricUnit(metric.key) }}</small
              >
            </li>
          }
        </ul>
      }
      @case (DATA_POINT_TYPE.STORM_WATER) {
        <ul class="metric-container">
          <li>
            <p class="button-sm">
              {{ 'MISC.QUALITY' | translate }}
            </p>
            <p-chip
              class="chip"
              [style]="{ 'background-color': getDataQualityBackgroundColor(dataPoint.quality) }"
              [label]="getQualityTranslation(dataPoint.quality) | translate"
            ></p-chip>
          </li>
          <li>
            <p class="button-sm">{{ 'DASHBOARD.DATA_POINTS.STORM_WATER.FILLLEVEL' | translate }}</p>
            <small class="body-sm">
              {{
                'DASHBOARD.DATA_POINTS.STORM_WATER.FILLLEVEL_RESULT.' + dataPoint.data['fillLevel'].toString() | translate
              }}
            </small>
          </li>
        </ul>
      }
      @case (DATA_POINT_TYPE.AIR_QUALITY) {
        <ul class="metric-container">
          <li>
            <p class="button-sm">
              {{ 'MISC.QUALITY' | translate }}
            </p>
            <p-chip
              class="chip"
              [style]="{ 'background-color': getDataQualityBackgroundColor(dataPoint.quality) }"
              [label]="getQualityTranslation(dataPoint.quality) | translate"
            ></p-chip>
          </li>
        </ul>
      }
      @case (DATA_POINT_TYPE.PARKING) {
        <ul class="metric-container">
          <li>
            <p class="button-sm">{{ 'DASHBOARD.DATA_POINTS.PARKING.AVAILABLE_SPOTS' | translate }}</p>
            <small class="body-sm">{{ dataPoint.availableSpots }}</small>
          </li>
        </ul>
      }
    }
  }
</div>
